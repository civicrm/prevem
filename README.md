# Prevem: Open source preview manager for emails

Prevem is a batch manager for email previews. It provides a RESTful CRUD API
which may be used two types of agents:

 * *Composer* - The mail user-agent (MUA) in which a user prepares a mailing.
   Generally, the Composer submits a `PreviewBatch` and polls to track its progress.
 * *Renderer* - The backend service which prepares a screenshot of how an email would
   appear when read in different MUAs. Generally, a Renderer polls for a pending
   `PreviewTask` record, prepares a screenshot, and then marks it as completed.

# Setup

```
$ git clone https://github.com/civicrm/prevem
$ cd prevem
$ npm install
$ node .
```

# Development

Starting the service with "node ." should create a working environment,
but it's a bit cumbersome to develop on. For local development (and only
for local development), it's better to start via:

```
$ npm install -g gulp
$ gulp develop
```

This will launch the service and execute the test suite. If you make
any changes to the code, it will relaunch the service and re-execute
the test suite.

If you encounter a hard-crash during development, you may need to
manually restart `gulp develop`.

# See also

 * The project is generated by [LoopBack](http://loopback.io).
 * The tests generally follow the approach from https://strongloop.com/strongblog/how-to-test-an-api-with-node-js/,
   but `make test` and `Makefile` have been replaced with `gulp develop` and `gulpfile.js`.
